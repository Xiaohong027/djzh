(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{KrUb:function(t,e,s){"use strict";var a=s("VPsf"),r=s.n(a);r.a},PiEZ:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",[s("q-card",{class:t.proposalDetailClass,attrs:{color:"white","text-color":"black"}},[s("q-card-title",{staticClass:"col-12 padding-l-0"},[s("q-icon",{attrs:{size:"18px",name:"border color"}}),t._v(" "+t._s(t.$t("proposal.SHOW"))+"\n      "),s("q-btn",{staticClass:"row items-center",attrs:{slot:"right",color:"secondary"},on:{click:t.back},slot:"right"},[s("q-icon",{attrs:{name:"reply"}})],1)],1),s("q-card-separator",{staticClass:"col-12 q-my-lg bg-999 no-border-top"}),s("div",{staticClass:"row col-12"},[s("q-field",{staticClass:"col-10 font-16",attrs:{"label-width":2,label:t.$t("proposal.SELECT_P_TITLE")}},[s("q-input",{staticClass:"border-1",attrs:{readonly:"","hide-underline":"",value:""},model:{value:t.detail.title,callback:function(e){t.$set(t.detail,"title",e)},expression:"detail.title"}})],1)],1),s("div",{staticClass:"row col-12"},[s("q-field",{staticClass:"col-10 font-16",attrs:{"label-width":2,label:t.$t("proposal.SELECT_P_TYPE")}},[s("q-input",{staticClass:"border-1",attrs:{readonly:"","hide-underline":"",value:""},model:{value:t.dealWithType,callback:function(e){t.dealWithType=e},expression:"dealWithType"}})],1)],1),s("div",{staticClass:"row col-12"},[s("q-field",{staticClass:"row col-10 font-16",attrs:{"label-width":2,label:t.$t("proposal.SELECT_P_PERIOD")}},[s("q-input",{staticClass:"border-1 col-5 inline-flex",attrs:{readonly:"","hide-underline":"",value:""},model:{value:t.time_buffer,callback:function(e){t.time_buffer=e},expression:"time_buffer"}}),t._v("\n        "+t._s(t.$t("TO"))+"\n        "),s("q-input",{staticClass:"border-1 col-5 inline-flex",attrs:{readonly:"","hide-underline":"",value:""},model:{value:t.time_end,callback:function(e){t.time_end=e},expression:"time_end"}})],1)],1)],1),s("q-card",{class:t.proposalDetailClass,attrs:{color:"white","text-color":"black"}},[s("q-card-title",{staticClass:"col-12 padding-l-0"},[s("q-icon",{attrs:{size:"18px",name:"border color"}}),t._v(" "+t._s(t.$t("proposal.CONTENT"))+"\n    ")],1),s("q-card-separator",{staticClass:"col-12 q-my-lg bg-999 no-border-top"}),s("q-card-main",{staticClass:"col-12 padding-0"},["gateway_register"===this.detail.topic?s("div",{staticClass:"col-12",attrs:{id:"new"}},[s("div",{staticClass:"row col-12"},[s("q-field",{staticClass:"block col-10 font-16",attrs:{"label-width":"2",label:t.$t("LAUNCH_MODAL.NET_NAME")}},[s("q-input",{staticClass:"border-1",attrs:{readonly:"","hide-underline":"",value:""},model:{value:t.content.name,callback:function(e){t.$set(t.content,"name",e)},expression:"content.name"}})],1)],1),s("div",{staticClass:"row col-12"},[s("q-field",{staticClass:"block col-10 font-16",attrs:{"label-width":"2","error-label":t.$t("LAUNCH_MODAL.NET_CURRENCY_TIP"),label:t.$t("LAUNCH_MODAL.NET_CURRENCY")}},[s("q-input",{staticClass:"border-1",attrs:{readonly:"","hide-underline":"",value:""},model:{value:t.content.currency.symbol,callback:function(e){t.$set(t.content.currency,"symbol",e)},expression:"content.currency.symbol"}})],1)],1),s("div",{staticClass:"row col-12"},[s("q-field",{staticClass:"block col-10 font-16",attrs:{"label-width":"2","error-label":t.$t("LAUNCH_MODAL.PRECISION_TIP"),label:t.$t("PRECISION")}},[s("q-input",{staticClass:"border-1",attrs:{readonly:"","hide-underline":"",value:""},model:{value:t.content.currency.precision,callback:function(e){t.$set(t.content.currency,"precision",e)},expression:"content.currency.precision"}})],1)],1),s("div",{staticClass:"row col-12"},[s("q-field",{staticClass:"block col-10 font-16",attrs:{"label-width":"2","error-label":t.$t("LAUNCH_MODAL.CURRENCY_BRIEF_TIP"),label:t.$t("LAUNCH_MODAL.CURRENCY_BRIEF")}},[s("q-input",{staticClass:"border-1 textareaInner",attrs:{type:"textarea",readonly:"","hide-underline":"",value:""},model:{value:t.content.currency.desc,callback:function(e){t.$set(t.content.currency,"desc",e)},expression:"content.currency.desc"}})],1)],1),s("div",{staticClass:"row col-12"},[s("q-field",{staticClass:"block col-10 font-16",attrs:{"label-width":"2","error-label":t.$t("ERR.ERR_3_15"),label:t.$t("LAUNCH_MODAL.MEMBER_NUMBER")}},[s("q-input",{staticClass:"border-1",attrs:{readonly:"","hide-underline":"",value:""},model:{value:t.content.minimumMembers,callback:function(e){t.$set(t.content,"minimumMembers",e)},expression:"content.minimumMembers"}})],1)],1),s("div",{staticClass:"row col-12"},[s("q-field",{staticClass:"col-10 font-16",attrs:{"label-width":"2","error-label":t.$t("ERR.ERR_1_30"),label:t.$t("LAUNCH_MODAL.PERIOD_NET")}},[s("q-input",{staticClass:"border-1",attrs:{readonly:"","hide-underline":"",value:"",color:"black"},model:{value:t.content.interval,callback:function(e){t.$set(t.content,"interval",e)},expression:"content.interval"}})],1)],1),s("div",{staticClass:"row col-12"},[s("q-field",{staticClass:"col-10 font-16",attrs:{"label-width":"2","error-label":t.$t("ERR.ERR_50_1000"),label:t.$t("LAUNCH_MODAL.BRIEF")}},[s("q-input",{staticClass:"border-1 textareaInner",attrs:{type:"textarea",value:"",readonly:"","hide-underline":""},model:{value:t.detail.desc,callback:function(e){t.$set(t.detail,"desc",e)},expression:"detail.desc"}})],1)],1)]):t._e(),"gateway_update_member"===this.detail.topic?s("div",{staticClass:"col-12",attrs:{id:"update_member"}},[s("div",{staticClass:"row col-12"},[s("q-field",{staticClass:"col-10 font-16",attrs:{"label-width":"2",label:t.$t("LAUNCH_MODAL.NET_NAME")}},[s("q-input",{staticClass:"border-1",attrs:{readonly:"","hide-underline":"",value:""},model:{value:t.content.gateway,callback:function(e){t.$set(t.content,"gateway",e)},expression:"content.gateway"}})],1)],1),s("div",{staticClass:"row"},[s("q-field",{staticClass:"col-10 font-16",attrs:{"label-width":"2"}},[s("p",{staticClass:"break"},[t._v("\n              "+t._s(t.$t("LAUNCH_MODAL.GATEWAY_MEMBER_UPDATE",{pre:t.content.from,post:t.content.to}))+"\n            ")])])],1)]):t._e(),"gateway_init"===this.detail.topic?s("div",{staticClass:"col-12",attrs:{id:"init"}},[s("div",{staticClass:"row col-12"},[s("q-field",{staticClass:"col-10 font-16",attrs:{"label-width":"2",label:t.$t("LAUNCH_MODAL.NET_NAME")}},[s("q-input",{staticClass:"border-1",attrs:{readonly:"","hide-underline":"",value:""},model:{value:t.content.gateway,callback:function(e){t.$set(t.content,"gateway",e)},expression:"content.gateway"}})],1)],1),s("div",{staticClass:"row"},[s("q-field",{staticClass:"col-10 font-16",attrs:{"label-width":"2"}},[s("p",{staticClass:"break"},[t._v("\n              "+t._s(t.$t("LAUNCH_MODAL.MEMBER_SUGGEST",{member:t.memberString,number:t.content.members.length}))+"\n            ")])])],1)]):t._e(),t.isIndicatorShow?s("member-indicator",{attrs:{memberPost:t.postMemberList,memberPre:t.preMemberList,showCounter:t.showCounter,type:this.detail.topic}}):t._e()],1)],1),s("q-card",{class:t.proposalDetailClass,attrs:{color:"white","text-color":"black"}},[s("q-card-title",{staticClass:"col-12 padding-l-0"},[s("q-icon",{attrs:{size:"18px",name:"border color"}}),t._v(" "+t._s(t.$t("proposal.VOTE_DETAIL"))+"\n    ")],1),s("q-card-separator",{staticClass:"col-12 q-my-lg bg-999 no-border-top"}),s("q-card-main",{staticClass:"col-12 padding-0"},[s("p",{staticClass:"font-16"},[t._v(t._s(t.$t("proposal.VOTE_STATUS",{number:t.voteTotalNum,rate:t.votePassRate})))]),s("q-field",{staticClass:"vote-list",attrs:{"label-width":"2",label:t.$t("LAUNCH_MODAL.VOTE_LIST")}},t._l(t.voteList,function(e,a){return s("q-chip",{key:a,staticClass:"chip",attrs:{square:"",color:"white","text-color":"secondary"}},[t._v(t._s(e))])}))],1),s("q-card-separator",{directives:[{name:"show",rawName:"v-show",value:!t.isBtnAble,expression:"!isBtnAble"}],staticClass:"col-12 q-my-lg bg-999 no-border-top"}),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isBtnAble,expression:"!isBtnAble"}],staticClass:"row col-12"},[t.secondSignature?s("q-field",{staticClass:"col-8 font-16",attrs:{label:t.$t("TRS_TYPE_SECOND_PASSWORD")+":","label-width":2}},[s("q-input",{attrs:{type:"password","error-label":t.$t("ERR_TOAST_SECONDKEY_WRONG"),error:t.$v.secondPwd.$error},on:{blur:t.$v.secondPwd.$touch},model:{value:t.secondPwd,callback:function(e){t.secondPwd=e},expression:"secondPwd"}})],1):t._e()],1),s("q-card-main",{directives:[{name:"show",rawName:"v-show",value:t.isDelegate,expression:"isDelegate"}],staticClass:"row justify-center"},[s("q-btn",{staticClass:"col-4",attrs:{color:"secondary",label:t.$t(t.btnInfo),disabled:t.isBtnAble},on:{click:t.active}})],1)],1)],1)},r=[];a._withStripped=!0;s("xfY5"),s("f3/d"),s("rGqo"),s("ls82");var i=s("yXPU"),n=s.n(i),o=s("MVZn"),l=s.n(o),c=s("L2JU"),d=s("ygAv"),u=s("oAqo"),h=s("sXxm"),p=s("4IOb"),b={name:"ProposalDetail",components:{QPage:p["I"],QField:p["t"],QModal:p["G"],QInput:p["v"],QCard:p["h"],QCardMain:p["j"],QCardTitle:p["m"],QCardSeparator:p["l"],QCheckbox:p["n"],QChipsInput:p["p"],QChip:p["o"],MemberIndicator:h["a"],QIcon:p["u"],QBtn:p["e"]},props:["user"],data:function(){return{tid:"",secondPwd:"",detail:{},content:{currency:{}},gatewayName:"",memberString:"",memberNumber:0,postMemberList:[],preMemberList:[],isIndicatorShow:!1,showCounter:!1,time_buffer:0,time_end:0,voteList:[],voteTotalNum:0,votePassRate:0,isBtnAble:!0,btnInfo:"",activeState:0}},validations:{secondPwd:{secondPwd:Object(u["i"])()}},methods:l()({},Object(c["b"])(["getProposal","getGatewayDelegates","getProposalVotes","voteProposal","activeProposal"]),{back:function(){this.$router.back()},getProposalInfo:function(){var t=n()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getProposal({tid:this.$route.params.tid});case 2:e=t.sent,this.detail=e.proposal,this.time_buffer=Object(d["a"])(this.detail.timestamp),this.envalueEnd(),this.content=Object(d["c"])(this.detail.content),this.content.interval=Math.round(this.content.updateInterval/8640)+this.$t("LAUNCH_MODAL.DAY"),1===this.detail.activated?(this.btnInfo="proposal.ACTIVATED",this.isBtnAble=!0):this.detail.endHeight<this.latestBlock.height?(this.btnInfo="proposal.EXPIRED",this.isBtnAble=!0):(this.btnInfo="proposal.BTN_VOTE",this.isBtnAble=!1);case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getVoterInfo:function(){var t=n()(regeneratorRuntime.mark(function t(){var e,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getProposalVotes({tid:this.$route.params.tid});case 2:e=t.sent,s=[],e.success&&e.votes.forEach(function(t){return s.push(t.account.name)}),this.voteList=s,this.voteTotalNum=e.totalCount,this.votePassRate=(100*(Number(e.validCount/101)||0)).toFixed(0);case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getValidatorInfo:function(){var t=n()(regeneratorRuntime.mark(function t(e){var s,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getGatewayDelegates(e);case 2:s=t.sent,s.success&&(a=[],s.validators.forEach(function(t){if(1===t.elected)return a.push(t.address)}),this.preMemberList=a,this.postMemberList=a);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),activePro:function(){var t=n()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.activeProposal({tid:this.$route.params.tid,secondPwd:this.secondPwd});case 2:e=t.sent,e.success?Object(d["m"])(this.$t("ACTIVE_SUCCESS")):Object(d["n"])(e.error);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),votePro:function(){var t=n()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.voteProposal({tid:this.$route.params.tid,secondPwd:this.secondPwd});case 2:e=t.sent,e.success?Object(d["m"])(this.$t("VOTE_SUCCESS")):Object(d["n"])(e.error);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),active:function(){0===this.activeState?this.votePro():this.activePro()},envalueEnd:function(){this.time_end=Object(d["h"])({tTimestamp:this.detail.timestamp,tHeight:this.detail.height,endHeight:this.detail.endHeight})}}),computed:l()({},Object(c["c"])(["userInfo"]),Object(c["e"])(["latestBlock"]),{proposalDetailClass:function(){return this.isDesk?"card-margin q-my-xl padding-top-0":"row margin-top-20 padding-top-0"},dealWithType:function(){switch(this.detail.topic){case"gateway_register":return this.isIndicatorShow=!1,this.$t("proposal.SELECT_NEWNET");case"gateway_init":return this.isIndicatorShow=!0,this.postMemberList=this.content.members,this.memberString=this.content.members.join(" , "),this.gatewayName=this.content.gateway,this.$t("proposal.SELECT_INITNET");case"gateway_update_member":return this.isIndicatorShow=!0,this.preMemberList=this.content.from,this.postMemberList=this.content.to,this.$t("proposal.SELECT_MEMBER_ACTION")}},secondSignature:function(){return this.userInfo?this.userInfo.account.secondPublicKey:null},isDelegate:function(){return!(!this.userInfo||!this.userInfo.account)&&1===this.userInfo.account.isDelegate}}),mounted:function(){this.getProposalInfo(),this.getVoterInfo()},watch:{userInfo:function(){this.getProposalInfo(),this.getVoterInfo()},detail:function(t){this._.isEmpty(this.detail)||0===this.voteTotalNum||(1===this.detail.activated?(this.btnInfo="proposal.ACTIVATED",this.isBtnAble=!0):this.detail.endHeight<this.latestBlock.height?(this.btnInfo="proposal.EXPIRED",this.isBtnAble=!0):this.voteTotalNum<=67?(this.btnInfo="proposal.BTN_VOTE",this.isBtnAble=!1,this.activeState=0):(this.btnInfo="proposal.ACTIVE",this.isBtnAble=!1,this.activeState=1))}}},m=b,f=(s("KrUb"),s("KHd+")),_=Object(f["a"])(m,a,r,!1,null,"610d3e8a",null);e["default"]=_.exports},VPsf:function(t,e,s){},o8Y3:function(t,e,s){},oAqo:function(t,e,s){"use strict";s.d(e,"j",function(){return n}),s.d(e,"f",function(){return l}),s.d(e,"g",function(){return c}),s.d(e,"e",function(){return d}),s.d(e,"c",function(){return u}),s.d(e,"a",function(){return h}),s.d(e,"d",function(){return b}),s.d(e,"b",function(){return m}),s.d(e,"i",function(){return f}),s.d(e,"h",function(){return _});var a=s("eO9T"),r=s("AKX1"),i=s.n(r),n=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$/,o=/^[A-Z]{3,6}$/,l=/^[a-z0-9_]{2,20}$/,c=/^[A-Za-z0-9_\-+!@$% ]{10,100}$/,d=/^[A-Za-z0-9]{3,16}$/,u=/^[A-Z]{3,6}$/,h=/^\d+(\.\d+)?$/,p=/\s/g,b=function(){return Object(a["withParams"])({},function(t){return i.a.validateMnemonic(t)})},m=function(){return Object(a["withParams"])({},function(t){return o.test(t)})},f=function(){return Object(a["withParams"])({},function(t){return n.test(t)})},_=function(){return Object(a["withParams"])({},function(t){return t.length<=40&&!p.test(t)})}},sXxm:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row justify-around q-my-lg member-container"},[s("div",{staticClass:"partLeft col-md-5 col-xs-12 align-center"},[s("div",{staticClass:"part-title"},[t._v(t._s(t.$t(t.title_pre)))]),t._l(t.contentPre,function(e,a){return s("q-chip",{key:a,staticClass:"chip",attrs:{square:"",color:"white","text-color":"secondary"}},[t._v(t._s(e))])})],2),s("q-icon",{staticClass:"mobile-hide padding-t-40",attrs:{size:"33px",name:"keyboard arrow right"}}),s("q-icon",{staticClass:"desktop-hide padding-t-40",attrs:{size:"33px",name:"keyboard arrow down"}}),s("div",{staticClass:"partRight col-md-5 col-xs-12 align-center"},[s("div",{staticClass:"part-title"},[t._v(t._s(t.$t(t.title_post)))]),t._l(t.contentPost,function(e,a){return s("q-chip",{key:a,staticClass:"chip",attrs:{square:"",color:"white","text-color":"secondary"}},[t._v(t._s(e))])})],2)],1)},r=[];a._withStripped=!0;var i=s("4IOb"),n={name:"MemberIndicator",props:["memberPre","memberPost","showCounter","type"],data:function(){return{preMsg:"",postMsg:""}},components:{QChipsInput:i["p"],QField:i["t"],QIcon:i["u"],QChip:i["o"]},computed:{title_pre:function(){switch(this.type){case"gateway_init":return this.$t("DETAIL_MODAL.INIT_TIP_PRE",{number:this.memberPre?this.memberPre.length:""});case"gateway_update_member":return this.$t("DETAIL_MODAL.MEMBER_TIP_PRE");case"council_change":return this.$t("LAUNCH_MODAL.INSTEAD_PRE")}},title_post:function(){switch(this.type){case"gateway_init":return this.$t("DETAIL_MODAL.INIT_TIP_POST",{number:this.memberPost?this.memberPost.length:""});case"gateway_update_member":return this.$t("DETAIL_MODAL.MEMBER_TIP_POST");case"council_change":return this.$t("LAUNCH_MODAL.INSTEAD_POST")}},contentPre:function(){if(Array.isArray(this.memberPre))return this.memberPre;var t=[];return t.push(this.memberPre),t},contentPost:function(){if(Array.isArray(this.memberPost))return this.memberPost;var t=[];return t.push(this.memberPost),t}}},o=n,l=(s("sj40"),s("KHd+")),c=Object(l["a"])(o,a,r,!1,null,"2e6a9eef",null);e["a"]=c.exports},sj40:function(t,e,s){"use strict";var a=s("o8Y3"),r=s.n(a);r.a}}]);