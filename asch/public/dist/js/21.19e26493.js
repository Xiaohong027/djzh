(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[21],{"+rej":function(e,t,n){"use strict";var r=n("5sk2"),s=n.n(r);s.a},"5sk2":function(e,t,n){},HB6m:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tab-panel-container row "},[e.delegates?n("div",{staticClass:"col-12 shadow-1"},[n("q-table",{attrs:{data:e.delegates,filter:e.filter,color:"primary",selection:"multiple",selected:e.selected,"row-key":"address",columns:e.columns,pagination:e.pagination,loading:e.loading,title:e.$t("TOTAL_PEOPLES",{count:e.pagination.rowsNumber}),"rows-per-page-options":[10]},on:{"update:selected":function(t){e.selected=t},request:e.request,"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"top-right",fn:function(t){return[e.selected.length?n("q-btn",{attrs:{color:"positive",flat:"",round:"",icon:"thumb up"},on:{click:e.vote}},[n("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[0,10]}},[e._v(e._s(e.$t("TRS_TYPE_VOTE")))])],1):e._e(),n("q-btn",{attrs:{flat:"",round:"",icon:"refresh",color:"primary"},on:{click:e.refresh}}),n("q-btn",{attrs:{flat:"",round:"",color:"primary",icon:t.inFullscreen?"fullscreen_exit":"fullscreen"},on:{click:t.toggleFullscreen}})]}},{key:"body-cell-address",fn:function(t){return n("q-td",{attrs:{props:t}},[n("div",{staticClass:"text-primary",on:{click:function(n){e.viewAccountInfo(t.row)}}},[e._v("\n          "+e._s(t.value)+"\n        ")])])}},{key:"body-cell-nickname",fn:function(t){return n("q-td",{attrs:{props:t}},[e._v("\n        "+e._s(t.value)+"\n      ")])}},{key:"body-cell-approval",fn:function(t){return n("q-td",{attrs:{props:t}},[e._v("\n        "+e._s(e._f("approval")(t.value))+"\n      ")])}}])})],1):e._e(),n("q-dialog",{attrs:{"prevent-close":""},on:{ok:e.onOk,cancel:e.onCancel},scopedSlots:e._u([{key:"buttons",fn:function(t){return[n("q-btn",{attrs:{flat:"",color:"primary",label:e.$t("label.cancel")},on:{click:t.cancel}}),n("q-btn",{attrs:{flat:"",color:"primary",label:e.$t("label.ok")},on:{click:t.ok}})]}}]),model:{value:e.dialogShow,callback:function(t){e.dialogShow=t},expression:"dialogShow"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.$t("VOTE_TITLE")))]),n("span",{attrs:{slot:"message"},slot:"message"},[e._v(e._s(e.$t("VOTE_TIP"))+"\n    "),n("br"),e._v("\n    "+e._s(e.$t("OPERATION_REQUIRES_FEE")+"0.1 XAS")+"\n  ")]),n("div",{attrs:{slot:"body"},slot:"body"},[e.secondSignature?n("q-field",{attrs:{label:e.$t("TRS_TYPE_SECOND_PASSWORD"),"error-label":e.$t("ERR_TOAST_SECONDKEY_WRONG"),"label-width":4}},[n("q-input",{attrs:{type:"password"},model:{value:e.secondPwd,callback:function(t){e.secondPwd=t},expression:"secondPwd"}})],1):e._e(),n("table",{staticClass:"q-table horizontal-separator highlight loose "},[n("tbody",{staticClass:"info-tbody"},[n("tr",[n("td",[e._v(e._s(e.$t("DAPP_NAME")))]),n("td",[e._v(e._s(e.$t("ADDRESS")))])]),e._l(e.selected,function(t){return n("tr",{key:t.address},[n("td",[e._v(e._s(t.name)+" "),t.voted?n("q-icon",{attrs:{name:"check circle",color:"positive"}}):e._e()],1),n("td",[e._v(e._s(t.address)+" ")])])})],2)])],1)])],1)},s=[];r._withStripped=!0;n("ls82");var a=n("yXPU"),o=n.n(a),i=n("MVZn"),l=n.n(i),c=n("ygAv"),u=n("dGEQ"),d=n("L2JU"),p=n("4IOb"),f={props:["userObj"],components:{QIcon:p["u"],QTable:p["U"],QBtn:p["e"],QField:p["t"],QTd:p["X"],QInput:p["v"],QTooltip:p["Da"]},data:function(){return{delegates:null,pagination:{page:1,rowsNumber:0,rowsPerPage:10},selected:[],filter:"",loading:!1,columns:[{name:"rate",label:this.$t("RANKING"),field:"rate",align:"center"},{name:"nickname",label:this.$t("DELEGATE"),field:"name",type:"string"},{name:"address",label:this.$t("ADDRESS"),field:"address"},{name:"productivity",label:this.$t("PRODUCTIVITY"),field:"productivity"},{name:"producedblocks",label:this.$t("PRODUCED_BLOCKS"),field:"producedblocks",align:"center",type:"number"},{name:"approval",label:this.$t("APPROVAL"),field:"approval"}],dialogShow:!1,dialog:{title:"",message:""},secondPwd:""}},methods:l()({},Object(d["b"])(["delegates","broadcastTransaction"]),{refresh:function(){this.pagination=this.paginationDeafult,this.getDelegates()},request:function(){var e=o()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getDelegates(t.pagination,t.filter);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getDelegates:function(){var e=o()(regeneratorRuntime.mark(function e(){var t,n,r,s,a=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},a.length>1&&void 0!==a[1]?a[1]:"",this.loading=!0,t.page&&(this.pagination=t),n=this.pagination.rowsPerPage,r=this.pagination.page,e.next=8,this.delegates({address:this.user.account.address,orderBy:"rate:asc",limit:n,offset:(r-1)*n});case 8:return s=e.sent,this.delegates=s.delegates,this.pagination.rowsNumber=s.totalCount,this.loading=!1,e.abrupt("return",s);case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),viewAccountInfo:function(e){this.$root.$emit("openAccountModal",e.address)},info:function(e){Object(c["m"])(e)},onOk:function(){var e=o()(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!==this.selectedDelegate.length){e.next=3;break}return this.selected=[],e.abrupt("return");case 3:return t=Object(u["h"])(this.selectedDelegate,this.user.secret,this.secondPwd),e.next=6,this.broadcastTransaction(t);case 6:n=e.sent,!0===n.success?Object(c["m"])(this.$t("INF_VOTE_SUCCESS")):Object(c["q"])(this.$t,n.error),this.secondPwd="";case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),onCancel:function(){this.secondPwd=""},vote:function(){this.dialogShow=!0},disableBtn:function(e){var t=this;this[e]=!0,this._.delay(function(){t[e]=!1},3e3)}}),mounted:function(){var e=o()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.user&&this.getDelegates();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),computed:{user:function(){return this.userObj},secondSignature:function(){return this.user?this.user.account.secondPublicKey:null},paginationDeafult:function(){return{page:1,rowsNumber:0,rowsPerPage:10}},selectedDelegate:function(){var e=this.selected.filter(function(e){return!e.voted});return e.map(function(e){return"+"+e.publicKey})}},watch:{userInfo:function(e){e&&this.getDelegates()},pageNo:function(e){this.getDelegates()}}},h=f,g=(n("+rej"),n("KHd+")),b=Object(g["a"])(h,r,s,!1,null,"d2855c82",null);t["default"]=b.exports}}]);